<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Clash of Clans Player Lookup</title>
</head>
<body>
  <h1>COC Player Lookup</h1>
  <input type="text" id="playerTag" placeholder="#PLAYER_TAG" />
  <button onclick="fetchPlayer()">Search</button>
  <div id="result"></div>

  <script>
    async function fetchPlayer() {
      const tag = document.getElementById('playerTag').value.trim().replace('#', '');
      const res = await fetch(`/api/player?tag=${tag}`);
      const data = await res.json();

      const div = document.getElementById('result');
      if (res.ok) {
        div.innerHTML = `
          <p><strong>Name:</strong> ${data.name}</p>
          <p><strong>Town Hall Level:</strong> ${data.townHallLevel}</p>
          <p><strong>Trophies:</strong> ${data.trophies}</p>
        `;
      } else {
        div.innerHTML = `<p style="color:red;">Error: ${data.message || data.error}</p>`;
      }
    }
  </script>
</body>
</html>
